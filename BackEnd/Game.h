//
// Created by tomjojo on 2023/5/30.
//

#pragma once

#include"Header.h"

#include"Pokemon.h"

class Game{
    const double typeEff[TYPE_COUNT][TYPE_COUNT] = {
        {1,1,1,1,1,1,1,1,1,1,1,1,0.5,0,1,1,0.5,1},
        {1,0.5,0.5,1,2,2,1,1,1,1,1,2,0.5,1,0.5,1,2,1},
        {1,2,0.5,1,0.5,1,1,1,2,1,1,1,2,1,0.5,1,1,1},
        {1,1,2,0.5,0.5,1,1,1,0,2,1,1,1,1,0.5,1,1,1},
        {1,0.5,2,1,0.5,1,1,0.5,2,0.5,1,0.5,2,1,0.5,1,0.5,1},
        {1,0.5,0.5,1,2,0.5,1,1,2,2,1,1,1,1,2,1,0.5,1},
        {2,1,1,1,1,2,1,0.5,1,0.5,0.5,0.5,2,0,1,2,2,0.5},
        {1,1,1,1,2,1,1,0.5,0.5,1,1,1,0.5,0.5,1,1,0,2},
        {1,2,1,2,0.5,1,1,2,1,0,1,0.5,2,1,1,1,2,1},
        {1,1,1,0.5,2,1,2,1,1,1,1,2,0.5,1,1,1,0.5,1},
        {1,1,1,1,1,1,2,2,1,1,0.5,1,1,1,1,0,0.5,1},
        {1,0.5,1,1,2,1,0.5,0.5,1,0.5,2,1,1,0.5,1,2,0.5,0.5},
        {1,2,1,1,1,2,0.5,1,0.5,2,1,2,1,1,1,1,0.5,1},
        {0,1,1,1,1,1,1,1,1,1,2,1,1,2,1,0.5,1,1},
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,0.5,0},
        {1,1,1,1,1,1,0.5,1,1,1,2,1,1,2,1,0.5,1,0.5},
        {1,0.5,0.5,0.5,1,2,1,1,1,1,1,1,2,1,1,1,0.5,2},
        {1,0.5,1,1,1,1,2,0.5,1,1,1,1,1,1,2,2,0.5,1}
    };
    map<string, Pokemon> pokemons;

public:
    Game() = default;
    Game(Pokemon& ,Pokemon& );
    void init(Pokemon ,Pokemon );
    queue<string> move(string, string, Type, bool, int, int, Status);
    void addPokemon(Pokemon&);
    void reset();
    double calcTypeEff(Type, vector<Type>);
    void print();
    double typeCount();
};
