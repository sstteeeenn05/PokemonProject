<html>
<head>
	<meta charset="UTF-8">
	<title>Battle</title>
	<link rel="stylesheet" href="BattleRoom.css">
	<link rel="stylesheet" href="modal.css">
	<script defer src="BattleRoom.js" type="module"></script>
</head>
<body x-data x-cloak>
<div class="main">

	<img class="enemy-pokemon-img" draggable="false" :src="$store.game.opponentPokemons[0].src">
	<img class="player-pokemon-img" draggable="false" :src="$store.game.myPokemons[0].src">

	<div class="enemy-info">
		<div class="info-upper">
			<div class="pokemon-name-section">
				<span class="pokemon-name" id="enemy-pokemon-name" x-text="'nani'"></span>
				<template x-for="(icon, index) in $store.modal.typeIconList" :key="index">
					<img class="icon" draggable="false" :src="'./assets/' + icon" x-show="$store.modal.pokemonType[index]">
				</template>
				<span class="level" x-text="'lv69'"></span>
			</div>

			<div class="icons">
				<template x-for="(icon, index) in $store.modal.conIconList" :key="index">
					<img class="icon" draggable="false" :src="'./assets/' + icon" x-show="$store.modal.pokemonCondition[index]">
				</template>
			</div>
		</div>

		<div class="health-bar">
			<div class="pokemon-health-out">
				<div class="pokemon-health-in"></div>
			</div>
			<span class="health" x-text="'500/1000'"></span>
		</div>
	</div>

	<div class="player-info">
		<div class="info-upper">
			<div class="pokemon-name-section">
				<span class="pokemon-name" id="player-pokemon-name" x-text="'nani'"></span>
				<template x-for="(icon, index) in $store.modal.typeIconList" :key="index">
					<img class="icon" draggable="false" :src="'./assets/' + icon" x-show="$store.modal.pokemonType[index]">
				</template>
				<span class="level" x-text="'lv69'"></span>
			</div>

			<div class="icons">
				<template x-for="(icon, index) in $store.modal.conIconList" :key="index">
					<img class="icon" draggable="false" :src="'./assets/' + icon" x-show="$store.modal.pokemonCondition[index]">
				</template>
			</div>
		</div>
		<div class="health-bar">
			<div class="pokemon-health-out">
				<div class="pokemon-health-in"></div>
			</div>
			<span class="health" x-text="'1000/1000'"></span>
		</div>
	</div>
	<div class="move-menu">
		<span class="context" x-text="'Nice to meet you'"></span>
		<div class="move-section">
				<button class="move-button" @click="$store.modal.open('fight')">Fight</button>
				<button class="move-button" @click="$store.modal.open('bag')">Bag</button>
				<button class="move-button" @click="$store.modal.open('pokemon')">Pok√©mon</button>
				<button class="move-button" @click="location.href = '/';">Exit</button>
		</div>
	</div>
</div>

<dialog class="modal" id="list">
	<div class="data-list">

		<div class="fight-selection-section" x-show="$store.modal.type === 'fight'">
			<template x-for="move in $store.game.myPokemons[0].moves" :key="index">
				<div class="fight-data">
					<div class="skill-title">
						<h2 x-text="move.name" style="margin: 0; display: inline-block"></h2>
						<div>
							<img class="icon" draggable="false" :src="'./assets/' + move.type + '.png'">
						</div>
					</div>
					<div class="skill-description">
						<div class="condition-list" x-show="move.con">
							<span style="font-size: x-large; margin-right: 2px">Con:</span>
							<img class="icon" draggable="false" :src="'./assets/' + move.con + '.svg'">
						</div>
						<div class="skill-detail">
							<span class="skill-form" x-text="move.type=='Potion'?'Potion':move.isPhysical?'Physical':'Special'"></span>
							<span class="skill-point" x-text="'PP: '+move.pp+'/10'"></span>
						</div>
					</div>
				</div>
			</template>
		</div>

		<div x-show="$store.modal.type === 'bag'">
			<template x-for="(item, index) in $store.modal.potionList" :key="index">
				<table class="potion-table" @click="$store.modal.selectingPokemon()">
					<tr>
						<td class="Potion-data-img-container">
							<img class="potion-data-img" draggable="false" :src="'./assets/' + item[0]">
						</td>
						<td>
							<div class="potion-data">
								<h1 x-text="item[1]" style="margin-top: 0"></h1>
								<span x-text="item[2]" style="font-size: x-large"></span>
							</div>
						</td>
					</tr>
				</table>
			</template>
		</div>

		<div x-show="$store.modal.type === 'pokemon'">
			<template x-for="pokemon in $store.game.myPokemons" :key="index">
				<table class="pokemon-table">
					<tr>
						<td class="pokemon-data-img-container">
							<img class="pokemon-data-img" :src="pokemon.src" draggable="false">
						</td>
						<td>
							<div class="pokemon-data">
								<div class="pokemon-data-upper">
									<div class="pokemon-name-section">
										<span class="pokemon-name" x-text="pokemon.name"></span>
										<template x-for="(icon, index) in pokemon.types" :key="index">
											<img class="icon" draggable="false" :src="'./assets/' + icon + '.png'" x-show="pokemon.types">
										</template>
										<span class="level" x-text="'lv'+pokemon.level"></span>
									</div>
									<div class="icons">
										<template x-for="(icon, index) in pokemon.cons" :key="index">
											<img class="icon" draggable="false" :src="'./assets/' + icon + '.png'" x-show="pokemon.cons">
										</template>
									</div>
								</div>
								<div class="health-bar pokemon-data-health-bar">
									<div class="pokemon-health-out pokemon-data-health-out">
										<div class="pokemon-health-in"></div>
									</div>
									<span class="health pokemon-data-health" x-text="pokemon.hp+'/1000'"></span>
								</div>
							</div>
						</td>
					</tr>
				</table>
			</template>
		</div>

	</div>
	<button class="modal-button cancel close" @click="$store.modal.close()">cancel</button>
</dialog>

</body>
</html>